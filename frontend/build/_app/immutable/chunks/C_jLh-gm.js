var q=Object.defineProperty;var L=(l,a,c)=>a in l?q(l,a,{enumerable:!0,configurable:!0,writable:!0,value:c}):l[a]=c;var r=(l,a,c)=>L(l,typeof a!="symbol"?a+"":a,c);import"./Bg9kRutz.js";import{p as _,u as p,b as z,g as s,s as O,d as R,c as S,r as X}from"./B4Lg9lPa.js";import{t as Y,a as j}from"./DZygbGll.js";import{a as H,p as W,b as k}from"./CpQLJhx0.js";import{a as g,o as G}from"./CB3B8p2k.js";var J=Y('<div id="canvas_container" class="svelte-17bv542"><canvas id="canvas" class="svelte-17bv542"></canvas></div>');function Z(l,a){_(a,!0);let c=H(a,"mouse",15);class w{constructor(o,i,h,u,f,A,B,E,F,P){r(this,"memberID");r(this,"x");r(this,"y");r(this,"radius");r(this,"color");r(this,"xvel");r(this,"yvel");r(this,"acc");r(this,"xtarget");r(this,"ytarget");this.memberID=o,this.x=i,this.y=h,this.radius=u,this.color=f,this.xvel=A,this.yvel=B,this.acc=E,this.xtarget=F,this.ytarget=P}draw(){b(this.x,this.y,this.radius,this.color)}move(){this.xvel=(this.xtarget-this.x)/5,this.yvel=(this.ytarget-this.y)/5,this.x+=this.xvel,this.y+=this.yvel,this.radius=30-1.5*Math.sqrt(Math.pow(this.xvel,2)+Math.pow(this.yvel,2))}}function M(){for(var t="0123456789ABCDEF",o="#",i=0;i<6;i++)o+=t[Math.floor(Math.random()*16)];return o}var v=W([]);p(()=>{for(const[t,o]of Object.entries(a.roomData)){const i=v.find(h=>h.memberID===t);if(i)i.xtarget=o.x,i.ytarget=o.y;else{const h=new w(t,50,50,50,M(),0,0,0,50,50);v.push(h)}}});let e=O(void 0);var n=null;function b(t,o,i,h){if(!(!n||!s(e))){var u=s(e).width/100*t,f=s(e).height/100*o;n.fillStyle=h,n.globalCompositeOperation="color-burn",n.beginPath(),n.ellipse(u,f,i,i,0,2*Math.PI,0),n.fill(),n.closePath()}}p(()=>{d()});function x(){!n||!s(e)||(n.clearRect(0,0,s(e).width,s(e).height),v.forEach(t=>{t.move(),t.draw()}),requestAnimationFrame(x))}g(()=>{s(e)&&(n=s(e).getContext("2d")),d(),requestAnimationFrame(x),window.addEventListener("resize",()=>{d()})});function d(){s(e)&&(s(e).width=document.body.clientWidth,s(e).height=window.innerHeight)}function y(t){if(s(e)&&c()){var o=s(e).getBoundingClientRect();const i=t.clientX-o.left,h=t.clientY-o.top;c({x:Math.round(i/s(e).width*100),y:Math.round(h/s(e).height*100)})}}g(()=>{a.mode==="client"&&s(e)&&s(e).addEventListener("mousemove",y)}),G(()=>{var t;(t=s(e))==null||t.removeEventListener("mousemove",y)}),g(()=>{navigator.requestMIDIAccess().then(I,D)});function I(t){}function D(t){console.error(`Failed to get MIDI access: ${t}`)}var m=J(),C=R(m);k(C,t=>S(e,t),()=>s(e)),X(m),j(l,m),z()}export{Z as C};

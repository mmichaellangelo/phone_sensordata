import"../chunks/Bg9kRutz.js";import{p as E,s as v,u as L,f as N,a as n,t as S,b as q,c as i,g as m,d as I,r as J}from"../chunks/B4Lg9lPa.js";import{d as O,s as W}from"../chunks/nfsmfi6W.js";import{i as j}from"../chunks/Bt13gXWS.js";import{t as l,a as p}from"../chunks/DZygbGll.js";import{p as c}from"../chunks/CpQLJhx0.js";import{w as z}from"../chunks/CFZWmZYP.js";import{p as _}from"../chunks/DfaIMGNC.js";import{C as A}from"../chunks/C_jLh-gm.js";var B=l("<p>Connected</p>"),F=l("<p>Not connected</p>"),G=l("<h2> </h2> <button>Init conn</button> <!> <!>",1);function X(g,b){E(b,!0);let o=v(!1),h=c({}),s=v(c({x:0,y:0}));const w=z({requests:[]});let e=null;function x(){e||(e=new WebSocket(`ws://localhost:8080/ws/room/${_.params.room_id}/client/`),e.addEventListener("open",()=>{i(o,!0)}),e.addEventListener("close",()=>{i(o,!1)}),e.addEventListener("message",t=>{}))}L(()=>{const t=m(s);if(e){const a=JSON.stringify(t);e.send(a)}});var f=G(),r=N(f),k=I(r);J(r);var d=n(r,2);d.__click=x;var u=n(d,2);{var C=t=>{var a=B();p(t,a)},y=t=>{var a=F();p(t,a)};j(u,t=>{m(o)?t(C):t(y,!1)})}var D=n(u,2);return A(D,{get roomData(){return h},mode:"client",get mouse(){return m(s)},set mouse(t){i(s,c(t))}}),S(()=>W(k,`${_.params.room_id??""} client`)),p(g,f),q({msg:w})}O(["click"]);export{X as component};

import"../chunks/Bg9kRutz.js";import{p as D,s as u,f as N,a as p,t as S,b as E,c as m,g as r,d as J,r as L}from"../chunks/B4Lg9lPa.js";import{d as O,s as I}from"../chunks/nfsmfi6W.js";import{i as W}from"../chunks/Bt13gXWS.js";import{t as c,a as i}from"../chunks/DZygbGll.js";import{p as _}from"../chunks/CpQLJhx0.js";import{o as j}from"../chunks/CB3B8p2k.js";import{p as g}from"../chunks/DfaIMGNC.js";import{C as q}from"../chunks/C_jLh-gm.js";var z=c("<p>Connected</p>"),A=c("<p>Not connected</p>"),B=c("<h2> </h2> <button>Init conn</button> <!> <!>",1);function U(b,h){D(h,!0);let s=u(!1),o=u(_({})),t=null;function x(){t||(t=new WebSocket(`ws://localhost:8080/ws/room/${g.params.room_id}/server/`),t.addEventListener("open",()=>{m(s,!0)}),t.addEventListener("close",()=>{m(s,!1)}),t.addEventListener("message",e=>{const a=JSON.parse(JSON.parse(e.data)),v=JSON.parse(a.data);r(o)[a.memberID]={x:v.x,y:v.y},m(o,_(r(o)))}))}j(()=>{t&&t.close()});var l=B(),n=N(l),k=J(n);L(n);var d=p(n,2);d.__click=x;var f=p(d,2);{var w=e=>{var a=z();i(e,a)},y=e=>{var a=A();i(e,a)};W(f,e=>{r(s)?e(w):e(y,!1)})}var C=p(f,2);q(C,{get roomData(){return r(o)},mode:"server",mouse:null}),S(()=>I(k,`${g.params.room_id??""} server`)),i(b,l),E()}O(["click"]);export{U as component};
